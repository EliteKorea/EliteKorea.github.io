<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ê³µë¶€ í”Œë˜ë„ˆ (ì •ìƒ ì‘ë™ ë²„ì „)</title>
<style>
*{box-sizing:border-box}
html,body{margin:0;padding:0;height:100%;overflow:hidden;font-family:Arial}
.hidden{display:none}
.center{display:flex;justify-content:center;align-items:center;height:100%}
.box{background:#fff;padding:20px;border-radius:12px;width:320px;box-shadow:0 4px 12px rgba(0,0,0,.15)}
button{padding:8px 12px;margin:4px;cursor:pointer}
input{width:100%;padding:8px;margin:6px 0}

#layout{display:grid;grid-template-columns:180px 1fr;height:100%}
#menu{background:#222;color:#fff;padding:10px}
#content{padding:12px;height:100%;overflow:hidden}
.page{height:100%;overflow:hidden}

#calendar{display:grid;grid-template-columns:repeat(7,1fr);gap:4px;height:100%}
.day{border:1px solid #aaa;min-height:80px;padding:4px;font-size:12px}
.today{border:2px solid red}

#timer{width:140px;height:140px;border-radius:50%;border:6px solid #333;display:flex;align-items:center;justify-content:center;font-size:22px;margin-bottom:10px}
</style>
</head>
<body>

<!-- ë¡œê·¸ì¸ / íšŒì›ê°€ì… -->
<div id="auth" class="center">
  <div class="box">
    <h2>ë¡œê·¸ì¸ / íšŒì›ê°€ì…</h2>
    <input id="id" placeholder="ì•„ì´ë””">
    <input id="pw" type="password" placeholder="ë¹„ë°€ë²ˆí˜¸">
    <button onclick="signup()">íšŒì›ê°€ì…</button>
    <button onclick="login()">ë¡œê·¸ì¸</button>
  </div>
</div>

<!-- ë©”ì¸ -->
<div id="app" class="hidden" style="height:100%">
  <div id="layout">
    <div id="menu">
      <h3>ğŸ“Œ ë©”ë‰´</h3>
      <button onclick="show('home')">ë©”ì¸</button><br>
      <button onclick="show('study')">ê³µë¶€ ì¼ì •</button><br><br>
      â­ Lv <span id="lv">1</span><br>
      ğŸ· <span id="title"></span><br>
      ğŸ’ <span id="point">0</span>P
    </div>
    <div id="content">

      <!-- ë©”ì¸ -->
      <div id="home" class="page">
        <h2>ì˜¤ëŠ˜ì˜ ëª…ì–¸</h2>
        <p id="quote"></p>
        <button onclick="checkIn()">ğŸ“… ì¶œì„ ì²´í¬</button>
      </div>

      <!-- ê³µë¶€ ì¼ì • -->
      <div id="study" class="page hidden">
        <h2 id="date"></h2>
        <div style="display:flex;height:100%">
          <div style="width:220px">
            <div id="timer">00:00</div>
            <input id="h" type="number" placeholder="ì‹œ">
            <input id="m" type="number" placeholder="ë¶„">
            <input id="s" type="number" placeholder="ì´ˆ">
            <button onclick="startTimer()">ì‹œì‘</button>
          </div>
          <div style="flex:1;padding-left:10px">
            <div id="calendar"></div>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>

<script>
/* ===== íšŒì› ===== */
function signup(){
  if(!id.value||!pw.value) return alert('ì…ë ¥í•´');
  if(localStorage.getItem('user:'+id.value)) return alert('ì´ë¯¸ ìˆìŒ');
  localStorage.setItem('user:'+id.value,pw.value);
  alert('íšŒì›ê°€ì… ì™„ë£Œ');
}

function login(){
  const saved=localStorage.getItem('user:'+id.value);
  if(!saved) return alert('ì•„ì´ë”” ì—†ìŒ');
  if(saved!==pw.value) return alert('ë¹„ë²ˆ í‹€ë¦¼');
  localStorage.setItem('login',id.value);
  auth.classList.add('hidden');
  app.classList.remove('hidden');
}

if(localStorage.getItem('login')){
  auth.classList.add('hidden');
  app.classList.remove('hidden');
}

/* ===== í˜ì´ì§€ ===== */
function show(p){home.classList.add('hidden');study.classList.add('hidden');document.getElementById(p).classList.remove('hidden')}

/* ===== í¬ì¸íŠ¸ / ë ˆë²¨ ===== */
function level(p){return p>=100?5:p>=50?4:p>=25?3:p>=10?2:1}
function titleOf(l){return ['ğŸŒ± ì´ˆë³´','ğŸ”¥ ì§‘ì¤‘ëŸ¬','âš¡ ê¾¸ì¤€ëŸ¬','ğŸ§  ë§ˆìŠ¤í„°','ğŸ‘‘ ì „ì„¤'][l-1]}
function updateStatus(){
  const p=Number(localStorage.getItem('point')||0);
  point.innerText=p;
  const l=level(p);
  lv.innerText=l;
  title.innerText=titleOf(l);
}

/* ===== ì¶œì„ ===== */
function checkIn(){
  const d=new Date().toDateString();
  if(localStorage.getItem('check')===d) return alert('ì´ë¯¸ ì¶œì„');
  let p=Number(localStorage.getItem('point')||0)+1;
  localStorage.setItem('check',d);
  localStorage.setItem('point',p);
  updateStatus();
}

/* ===== ëª…ì–¸ ===== */
const quotes=['ì˜¤ëŠ˜ì˜ ë…¸ë ¥ì´ ë‚´ì¼ì„ ë§Œë“ ë‹¤','ê¾¸ì¤€í•¨ì´ ì¬ëŠ¥ì´ë‹¤','í¬ê¸°í•˜ì§€ ë§ˆ'];
quote.innerText=quotes[Math.floor(Math.random()*quotes.length)];

/* ===== ë‹¬ë ¥ ë©”ëª¨ ===== */
function drawCalendar(){
  calendar.innerHTML='';
  const now=new Date();
  date.innerText=`${now.getFullYear()}ë…„ ${now.getMonth()+1}ì›” ${now.getDate()}ì¼`;
  for(let i=1;i<=31;i++){
    const d=document.createElement('div');
    d.className='day';
    if(i===now.getDate()) d.classList.add('today');
    const key='memo-'+now.getMonth()+'-'+i;
    d.contentEditable=true;
    d.innerText=localStorage.getItem(key)||i;
    d.onblur=()=>localStorage.setItem(key,d.innerText);
    calendar.appendChild(d);
  }
}

/* ===== íƒ€ì´ë¨¸ ===== */
let it;
function startTimer(){
  let t=(+h.value||0)*3600+(+m.value||0)*60+(+s.value||0);
  clearInterval(it);
  it=setInterval(()=>{
    if(t<=0){clearInterval(it);return;}
    t--;
    timer.innerText=Math.floor(t/60)+":"+(t%60).toString().padStart(2,'0');
  },1000);
}

/* ì´ˆê¸° */
drawCalendar();updateStatus();
</script>
</body>
</html>

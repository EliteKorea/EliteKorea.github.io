<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>í•™ìƒìš© í¸ë¦¬ ì‚¬ì´íŠ¸</title>

<style>
body {
  margin: 0;
  font-family: "Malgun Gothic", Arial;
  background: #dcdcdc;
}

/* ì „ì²´ ë ˆì´ì•„ì›ƒ */
.container {
  display: grid;
  grid-template-columns: 260px 1fr;
  height: 100vh;
}

/* ì™¼ìª½ ì˜ì—­ (ì‹¸ì´ì›”ë“œ ëŠë‚Œ) */
.left {
  background: #f7f7f7;
  padding: 15px;
  border-right: 2px solid #bbb;
}

/* íƒ€ì´ë¨¸ */
.timer-box {
  background: white;
  border: 2px solid #aaa;
  padding: 15px;
  text-align: center;
}

.timer {
  font-size: 36px;
  margin: 10px 0;
}

.timer input {
  width: 50px;
  text-align: center;
}

/* ì˜¤ë¥¸ìª½ ë‹¬ë ¥ */
.right {
  padding: 20px;
}

.calendar {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 6px;
}

.day {
  background: white;
  border: 1px solid #aaa;
  min-height: 110px;
  padding: 5px;
  cursor: pointer;
}

.day.today {
  background: #e3f2fd;
}

.day span {
  font-size: 14px;
  font-weight: bold;
}

.todo-dot {
  font-size: 12px;
  color: crimson;
  margin-top: 4px;
}

/* ìƒë‹¨ */
.top-bar {
  background: #3b5998;
  color: white;
  padding: 8px;
  font-weight: bold;
}
</style>
</head>

<body>

<div class="top-bar">ğŸ“˜ STUDY WORLD</div>

<div class="container">

  <!-- ì™¼ìª½ -->
  <div class="left">
    <div class="timer-box">
      <h3>â± ê³µë¶€ íƒ€ì´ë¨¸</h3>

      <div>
        <input id="min" type="number" value="25"> ë¶„
        <input id="sec" type="number" value="0"> ì´ˆ
      </div>

      <div class="timer" id="timer">25:00</div>

      <button onclick="startTimer()">ì‹œì‘</button>
      <button onclick="pauseTimer()">ì •ì§€</button>
      <button onclick="resetTimer()">ë¦¬ì…‹</button>
    </div>
  </div>

  <!-- ì˜¤ë¥¸ìª½ -->
  <div class="right">
    <h2>ğŸ“… ë‹¬ë ¥ í•  ì¼</h2>

    <input id="todoText" placeholder="í•  ì¼">
    <input id="todoDate" type="date">
    <button onclick="addTodo()">ì¶”ê°€</button>

    <div class="calendar" id="calendar"></div>
  </div>

</div>

<script>
/* ===== íƒ€ì´ë¨¸ ===== */
let time = 1500;
let interval = null;
const timerEl = document.getElementById("timer");

function updateTimer() {
  const m = String(Math.floor(time / 60)).padStart(2,"0");
  const s = String(time % 60).padStart(2,"0");
  timerEl.textContent = `${m}:${s}`;
}

function startTimer() {
  if (interval) return;
  const min = parseInt(document.getElementById("min").value) || 0;
  const sec = parseInt(document.getElementById("sec").value) || 0;
  time = min * 60 + sec;
  updateTimer();

  interval = setInterval(() => {
    if (time > 0) {
      time--;
      updateTimer();
    } else {
      clearInterval(interval);
      interval = null;
      alert("ê³µë¶€ ë!");
    }
  }, 1000);
}

function pauseTimer() {
  clearInterval(interval);
  interval = null;
}

function resetTimer() {
  pauseTimer();
  updateTimer();
}

/* ===== ë‹¬ë ¥ ===== */
const calendarEl = document.getElementById("calendar");
let todos = JSON.parse(localStorage.getItem("calendarTodos")) || [];

function saveTodos() {
  localStorage.setItem("calendarTodos", JSON.stringify(todos));
}

function addTodo() {
  const text = todoText.value;
  const date = todoDate.value;
  if (!text || !date) return;
  todos.push({ text, date });
  todoText.value = "";
  todoDate.value = "";
  saveTodos();
  renderCalendar();
}

function renderCalendar() {
  calendarEl.innerHTML = "";
  const now = new Date();
  const y = now.getFullYear();
  const m = now.getMonth();
  const first = new Date(y, m, 1).getDay();
  const last = new Date(y, m+1, 0).getDate();

  for (let i=0;i<first;i++) calendarEl.appendChild(document.createElement("div"));

  for (let d=1; d<=last; d++) {
    const dateStr = `${y}-${String(m+1).padStart(2,"0")}-${String(d).padStart(2,"0")}`;
    const day = document.createElement("div");
    day.className = "day";
    if (d === now.getDate()) day.classList.add("today");

    day.innerHTML = `<span>${d}</span>`;
    const dayTodos = todos.filter(t => t.date === dateStr);
    if (dayTodos.length)
      day.innerHTML += `<div class="todo-dot">â— ${dayTodos.length}</div>`;

    day.onclick = () => {
      alert(dayTodos.length
        ? dayTodos.map(t=>"â€¢ "+t.text).join("\n")
        : "í•  ì¼ ì—†ìŒ");
    };

    calendarEl.appendChild(day);
  }
}

renderCalendar();
updateTimer();
</script>

</body>
</html>

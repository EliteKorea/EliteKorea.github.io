<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ê³µë¶€ ì¼ì • ì‚¬ì´íŠ¸</title>
<style>
* { box-sizing: border-box; }
body {
  margin: 0;
  height: 100vh;
  overflow: hidden;
  font-family: Arial, sans-serif;
  background: #0f172a;
  color: white;
}
.hidden { display: none; }
.center {
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
}
.box {
  background: #1e293b;
  padding: 20px;
  border-radius: 12px;
  width: 320px;
  text-align: center;
}
input, button {
  width: 100%;
  padding: 10px;
  margin-top: 8px;
  border-radius: 6px;
  border: none;
}
button { cursor: pointer; background:#38bdf8; font-weight:bold; }

/* layout */
#app { height:100vh; display:flex; }
#sidebar {
  width: 220px;
  background:#020617;
  padding: 12px;
  display:flex;
  flex-direction:column;
  gap:10px;
}
#content {
  flex:1;
  padding:12px;
  display:flex;
  flex-direction:column;
  gap:10px;
}
.card {
  background:#1e293b;
  border-radius:12px;
  padding:12px;
}

/* calendar */
#calendar {
  display:grid;
  grid-template-columns: repeat(7, 1fr);
  gap:6px;
}
.day {
  background:#334155;
  min-height:80px;
  padding:4px;
  font-size:12px;
}
.today { outline:2px solid #38bdf8; }
textarea {
  width:100%;
  height:60px;
  background:#020617;
  color:white;
  border:none;
}

/* timer */
#timerCircle {
  width:120px; height:120px;
  border-radius:50%;
  border:8px solid #38bdf8;
  display:flex;
  justify-content:center;
  align-items:center;
  font-size:18px;
}
.pixel body { image-rendering: pixelated; }
</style>
</head>
<body>

<!-- LOGIN -->
<div id="loginPage" class="center">
  <div class="box">
    <h2>ë¡œê·¸ì¸</h2>
    <input id="loginId" placeholder="ì•„ì´ë””" />
    <input id="loginPw" type="password" placeholder="ë¹„ë°€ë²ˆí˜¸" />
    <button onclick="login()">ë¡œê·¸ì¸</button>
    <button onclick="showSignup()">íšŒì›ê°€ì…</button>
  </div>
</div>

<!-- SIGNUP -->
<div id="signupPage" class="center hidden">
  <div class="box">
    <h2>íšŒì›ê°€ì…</h2>
    <input id="signupId" placeholder="ì•„ì´ë””" />
    <input id="signupPw" type="password" placeholder="ë¹„ë°€ë²ˆí˜¸" />
    <button onclick="signup()">ê°€ì…</button>
    <button onclick="backLogin()">ë’¤ë¡œ</button>
  </div>
</div>

<!-- APP -->
<div id="app" class="hidden">
  <div id="sidebar">
    <button onclick="showMain()">ë©”ì¸</button>
    <button onclick="showStudy()">ê³µë¶€ ì¼ì •</button>
    <button onclick="togglePixel()">í”½ì…€ ëª¨ë“œ</button>
    <div class="card">ğŸ’– í›„ì›</div>
    <div class="card">ğŸ“¢ ê´‘ê³ </div>
    <button onclick="logout()">ë¡œê·¸ì•„ì›ƒ</button>
  </div>

  <div id="content">
    <!-- MAIN -->
    <div id="mainPage" class="card">
      <h3>ì˜¤ëŠ˜ì˜ ëª…ì–¸</h3>
      <p id="quote"></p>
      <p>ì¶œì„: <span id="days"></span>ì¼</p>
      <p>í¬ì¸íŠ¸: <span id="points"></span></p>
    </div>

    <!-- STUDY -->
    <div id="studyPage" class="hidden" style="display:flex; gap:10px; flex:1;">
      <div class="card" style="width:200px;">
        <h4>íƒ€ì´ë¨¸</h4>
        <input id="hh" placeholder="ì‹œ" />
        <input id="mm" placeholder="ë¶„" />
        <input id="ss" placeholder="ì´ˆ" />
        <button onclick="startTimer()">ì‹œì‘</button>
        <div id="timerCircle">00:00</div>
      </div>
      <div class="card" style="flex:1;">
        <h4 id="ym"></h4>
        <div id="calendar"></div>
      </div>
    </div>
  </div>
</div>

<script>
/* AUTH */
function showSignup(){loginPage.classList.add('hidden');signupPage.classList.remove('hidden');}
function backLogin(){signupPage.classList.add('hidden');loginPage.classList.remove('hidden');}
function signup(){
  const i=signupId.value,p=signupPw.value;
  if(!i||!p)return alert('ì…ë ¥í•´');
  if(localStorage.getItem('u-'+i))return alert('ì´ë¯¸ ìˆìŒ');
  localStorage.setItem('u-'+i,p);alert('ì™„ë£Œ');backLogin();}
function login(){
  const i=loginId.value,p=loginPw.value;
  if(localStorage.getItem('u-'+i)!==p)return alert('ì‹¤íŒ¨');
  localStorage.setItem('login',i);startApp();}
function logout(){localStorage.removeItem('login');location.reload();}

/* APP */
function startApp(){loginPage.classList.add('hidden');signupPage.classList.add('hidden');app.classList.remove('hidden');loadMain();}
if(localStorage.getItem('login'))startApp();

/* MAIN */
const quotes=['í¬ê¸°í•˜ì§€ ë§ˆ','ì˜¤ëŠ˜ë„ ì„±ì¥','ê¾¸ì¤€í•¨ì´ ë‹µ'];
function loadMain(){
  quote.innerText=quotes[new Date().getDate()%quotes.length];
  let d=+localStorage.getItem('days')||0;
  let last=localStorage.getItem('last');
  const today=new Date().toDateString();
  if(last!==today){d++;localStorage.setItem('days',d);localStorage.setItem('last',today);
    let p=+localStorage.getItem('points')||0;p+=d%7===0?10:1;localStorage.setItem('points',p);}  
  days.innerText=d;points.innerText=localStorage.getItem('points')||0;
}

/* STUDY */
function showMain(){mainPage.classList.remove('hidden');studyPage.classList.add('hidden');}
function showStudy(){mainPage.classList.add('hidden');studyPage.classList.remove('hidden');buildCal();}

function buildCal(){
  calendar.innerHTML='';
  const now=new Date();
  ym.innerText=`${now.getFullYear()}-${now.getMonth()+1}-${now.getDate()}`;
  const total=30;
  for(let i=1;i<=total;i++){
    const d=document.createElement('div');d.className='day';
    if(i===now.getDate())d.classList.add('today');
    const ta=document.createElement('textarea');
    ta.value=localStorage.getItem('memo-'+i)||'';
    ta.oninput=()=>localStorage.setItem('memo-'+i,ta.value);
    d.innerText=i;d.appendChild(ta);calendar.appendChild(d);
  }
}

/* TIMER */
let t;
function startTimer(){
  let s=(+hh.value||0)*3600+(+mm.value||0)*60+(+ss.value||0);
  clearInterval(t);
  t=setInterval(()=>{
    if(s<=0){clearInterval(t);return;}
    s--;timerCircle.innerText=Math.floor(s/60)+":"+(s%60).toString().padStart(2,'0');
  },1000);
}

function togglePixel(){document.body.classList.toggle('pixel');}
</script>
</body>
</html>
